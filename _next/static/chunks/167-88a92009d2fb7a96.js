"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{6167:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(5155),s=n(2115),l=n(4417),o=n(4342),r=n(1733);function a(e,t,n,i){let s=n.map(e=>[e[0]/100*i.width,e[1]/100*i.height]),l=!1;for(let n=0,i=s.length-1;n<s.length;i=n++){let o=s[n][0],r=s[n][1],a=s[i][0],c=s[i][1];r>t!=c>t&&e<(a-o)*(t-r)/(c-r)+o&&(l=!l)}return l}function c(e){var t,n,c;let{mapImage:d,locations:h=[],regions:m=[]}=e,p=(0,s.useRef)(null),[x,u]=(0,s.useState)({width:1e3,height:600}),[w,g]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(!0),[j,N]=(0,s.useState)(null),P=(0,s.useRef)(null);function k(e,t){let n=e/100*x.width,i=t/100*x.height;P.current&&P.current.setTransform(x.width/2-n,x.height/2-i,1)}function C(e){let t=e.pointsPercent;k(t.reduce((e,t)=>e+t[0],0)/t.length,t.reduce((e,t)=>e+t[1],0)/t.length)}(0,s.useEffect)(()=>{function e(){p.current&&u({width:p.current.clientWidth,height:p.current.clientHeight})}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let L=m.map(e=>({...e,locations:h.filter(t=>a(t.x/100*x.width,t.y/100*x.height,e.pointsPercent,x))})),S=h.filter(e=>{let t=e.x/100*x.width,n=e.y/100*x.height;return!m.some(e=>a(t,n,e.pointsPercent,x))});return(0,i.jsxs)("div",{className:"relative bg-gray-900/20 rounded-lg p-2 overflow-hidden shadow-inner w-full",children:[(0,i.jsx)("div",{className:"absolute top-2 left-2 z-40",children:(0,i.jsx)("button",{onClick:()=>y(e=>!e),className:"bg-white/20 backdrop-blur-md text-white px-3 py-1 rounded text-xs hover:bg-white/30 transition",children:b?"Hide Legend":"Show Legend"})}),(0,i.jsx)(l.GT,{initialScale:1,minScale:.5,maxScale:4,ref:P,children:(0,i.jsx)(l.WZ,{children:(0,i.jsxs)("div",{className:"relative w-full max-w-full mx-auto",children:[(0,i.jsx)("img",{ref:p,src:d,onLoad:function(e){u({width:e.target.clientWidth,height:e.target.clientHeight})},alt:"map",className:"w-full h-auto rounded-md select-none shadow-lg"}),(0,i.jsx)("svg",{viewBox:"0 0 ".concat(x.width," ").concat(x.height),preserveAspectRatio:"xMidYMid meet",className:"absolute left-0 top-0 w-full h-full",children:m.map(e=>(0,i.jsx)("polygon",{points:e.pointsPercent.map(e=>"".concat(e[0]/100*x.width," ").concat(e[1]/100*x.height)).join(" "),fill:e.color,opacity:(null==j?void 0:j.type)==="region"&&j.name===e.name?.7:.35,stroke:e.color,strokeWidth:"2",className:"cursor-pointer transition-all ".concat((null==j?void 0:j.type)==="region"&&j.name===e.name?"filter drop-shadow-lg":"hover:opacity-50 hover:filter hover:drop-shadow-lg"),onClick:()=>{v(e),g(!0),C(e),N({type:"region",name:e.name,pointsPercent:e.pointsPercent})},onMouseEnter:()=>N({type:"region",name:e.name,pointsPercent:e.pointsPercent}),onMouseLeave:()=>N(null)},e.id))}),h.map(e=>(0,i.jsx)("div",{style:{position:"absolute",left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"translate(-50%,-50%)"},onMouseEnter:()=>N({type:"location",name:e.name,xPercent:e.x,yPercent:e.y}),onMouseLeave:()=>N(null),children:(0,i.jsx)("div",{onClick:()=>{v(e),g(!0),k(e.x,e.y)},className:"w-4 h-4 sm:w-5 sm:h-5 bg-red-500 rounded-full border-2 border-white cursor-pointer shadow-lg hover:scale-125 transition-transform"})},e.id)),j&&(0,i.jsx)("div",{style:{position:"absolute",left:void 0!==j.xPercent?"".concat(j.xPercent,"%"):"".concat(j.pointsPercent.reduce((e,t)=>e+t[0],0)/j.pointsPercent.length,"%"),top:void 0!==j.yPercent?"".concat(j.yPercent,"%"):"".concat(j.pointsPercent.reduce((e,t)=>e+t[1],0)/j.pointsPercent.length,"%"),transform:"translate(-50%, -120%)"},className:"bg-black/70 text-white px-2 py-1 rounded text-xs shadow-lg pointer-events-none z-50 max-w-[150px] text-center",children:j.name})]})})}),b&&(0,i.jsxs)("div",{className:"absolute top-14 left-2 z-40 bg-black/50 backdrop-blur-md p-3 rounded-lg shadow-md max-h-64 overflow-auto text-sm text-white w-40 sm:w-60 md:w-72",children:[(0,i.jsx)("div",{className:"font-bold mb-2 text-lg",children:"Legend"}),L.map(e=>(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1 cursor-pointer hover:scale-105 transition-transform",onClick:()=>{C(e),N({type:"region",name:e.name,pointsPercent:e.pointsPercent})},children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full border border-white",style:{background:e.color}}),(0,i.jsx)("div",{children:e.name})]}),(0,i.jsx)("div",{className:"ml-4 space-y-1",children:e.locations.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform",onClick:()=>{k(e.x,e.y),N({type:"location",name:e.name,xPercent:e.x,yPercent:e.y})},children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full border border-white"}),(0,i.jsx)("div",{children:e.name})]},e.id))})]},e.id)),S.length>0&&(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("div",{className:"font-semibold mb-1",children:"Other Locations"}),(0,i.jsx)("div",{className:"ml-4 space-y-1",children:S.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform",onClick:()=>{k(e.x,e.y),N({type:"location",name:e.name,xPercent:e.x,yPercent:e.y})},children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full border border-white"}),(0,i.jsx)("div",{children:e.name})]},e.id))})]})]}),(0,i.jsx)(o.N,{children:w&&f&&(0,i.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-50 p-4 sm:p-8",children:[(0,i.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:.7},exit:{opacity:0},className:"absolute inset-0 bg-gradient-to-br from-purple-900 via-indigo-900 to-black"}),(0,i.jsxs)(r.P.div,{initial:{y:-50,scale:.8,opacity:0},animate:{y:0,scale:1,opacity:1},exit:{y:50,scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"relative bg-gray-900/80 backdrop-blur-xl border border-indigo-500/30 p-4 sm:p-6 rounded-3xl shadow-2xl w-full max-w-md max-h-[80vh] overflow-y-auto overflow-x-hidden",children:[(0,i.jsx)("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 w-16 h-1 rounded-full bg-indigo-400/50 animate-pulse"}),(0,i.jsx)("h3",{className:"font-extrabold text-xl sm:text-2xl text-indigo-400 mb-3 text-center drop-shadow-md",children:f.name}),(0,i.jsx)("p",{className:"text-sm text-gray-200 whitespace-pre-wrap break-words mb-4 max-w-full",children:f.showFull?f.lore||"No description":(null==(t=f.lore)?void 0:t.slice(0,140))+((null==(n=f.lore)?void 0:n.length)>140?"...":"")||"No description"}),(0,i.jsxs)("div",{className:"flex justify-center gap-2 sm:gap-3 flex-wrap",children:[(null==(c=f.lore)?void 0:c.length)>140&&(0,i.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>v(e=>({...e,showFull:!e.showFull})),className:"px-3 sm:px-4 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white font-semibold transition-shadow shadow-md",children:f.showFull?"Show Less":"Show More"}),f.link&&(0,i.jsx)(r.P.a,{href:f.link,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 sm:px-4 py-2 rounded-xl bg-green-600 hover:bg-green-500 text-white font-semibold transition-shadow shadow-md",children:"Open Link"}),(0,i.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(!1),className:"px-3 sm:px-4 py-2 rounded-xl bg-gray-700 hover:bg-gray-600 text-white font-semibold transition-shadow shadow-md",children:"Close"})]})]})]},"modal")})]})}}}]);